<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TESTE IPHONE - SEM DALTONISMO</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="css/modal-test-no-colorblind.css" rel="stylesheet">
    <style>
        .debug-box {
            position: fixed;
            top: 10px;
            left: 10px;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 10px;
            border-radius: 5px;
            font-size: 12px;
            max-width: 300px;
            z-index: 60000;
        }
        
        .test-result {
            margin: 10px 0;
            padding: 10px;
            border-radius: 5px;
        }
        
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
    </style>
</head>
<body>
    <!-- Debug Info -->
    <div class="debug-box">
        <strong>üß™ TESTE SEM DALTONISMO</strong><br>
        <span id="device-info"></span><br>
        <span id="status">Carregando...</span>
    </div>

    <div class="container-fluid p-3">
        <h1 class="text-center">üß™ TESTE IPHONE</h1>
        <h2 class="text-center text-muted">SEM BOT√ÉO DALTONISMO</h2>
        
        <div class="row mt-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header bg-primary text-white">
                        <h5 class="mb-0">üéØ Objetivo do Teste</h5>
                    </div>
                    <div class="card-body">
                        <p>Verificar se o <strong>bot√£o daltonismo</strong> estava causando conflito com as modais no iPhone.</p>
                        <p class="mb-0"><strong>Estado atual:</strong> Bot√£o daltonismo DESABILITADO</p>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="row mt-3">
            <div class="col-12">
                <button class="btn btn-success btn-lg w-100 mb-3" data-bs-toggle="modal" data-bs-target="#testeModal">
                    üöÄ ABRIR MODAL DE TESTE
                </button>
                
                <div id="test-results"></div>
            </div>
        </div>
    </div>

    <!-- Modal de Teste Completo -->
    <div class="modal fade" id="testeModal" tabindex="-1" data-bs-backdrop="static" data-bs-keyboard="false">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header bg-info text-white">
                    <h5 class="modal-title">
                        üß™ Modal de Teste - SEM Daltonismo
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <div class="alert alert-warning">
                        <strong>üì± TESTE IPHONE:</strong> Esta modal deve funcionar perfeitamente!
                    </div>
                    
                    <h6>üîò Teste os Bot√µes:</h6>
                    <div class="row mb-3">
                        <div class="col-6">
                            <button class="btn btn-primary w-100" onclick="testarBotao('Bot√£o Azul')">
                                üîµ Bot√£o Azul
                            </button>
                        </div>
                        <div class="col-6">
                            <button class="btn btn-danger w-100" onclick="testarBotao('Bot√£o Vermelho')">
                                üî¥ Bot√£o Vermelho
                            </button>
                        </div>
                    </div>
                    
                    <h6>üìù Teste o Formul√°rio:</h6>
                    <form id="testeForm" onsubmit="return testarForm(event)">
                        <div class="mb-3">
                            <label class="form-label">Nome:</label>
                            <input type="text" class="form-control form-control-lg" placeholder="Digite seu nome" required>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">Email:</label>
                            <input type="email" class="form-control form-control-lg" placeholder="seu@email.com" required>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">Status:</label>
                            <select class="form-control form-control-lg" required>
                                <option value="">Selecione...</option>
                                <option value="liberado">Liberado</option>
                                <option value="executado">Executado</option>
                                <option value="retirado">Retirado</option>
                            </select>
                        </div>
                        
                        <div class="mb-3">
                            <label class="form-label">Observa√ß√µes:</label>
                            <textarea class="form-control" rows="3" placeholder="Digite suas observa√ß√µes..."></textarea>
                        </div>
                        
                        <button type="submit" class="btn btn-success btn-lg w-100">
                            ‚úÖ ENVIAR FORMUL√ÅRIO
                        </button>
                    </form>
                    
                    <div id="modal-results" class="mt-3"></div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary btn-lg" data-bs-dismiss="modal">
                        ‚ùå FECHAR
                    </button>
                    <button type="button" class="btn btn-warning btn-lg" onclick="testarBotao('Bot√£o Footer')">
                        ‚ö†Ô∏è TESTE FOOTER
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/modal-fix-test-no-colorblind.js"></script>
    
    <script>
        // Detectar dispositivo
        const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);
        const isMobile = window.innerWidth <= 768;
        
        document.getElementById('device-info').innerHTML = 
            `üì± ${isIOS ? 'iOS' : 'Other'} | ${isMobile ? 'Mobile' : 'Desktop'}`;
        
        let testCount = 0;
        
        function addResult(message, type = 'success') {
            testCount++;
            const resultDiv = document.createElement('div');
            resultDiv.className = `test-result ${type}`;
            resultDiv.innerHTML = `<strong>#${testCount}:</strong> ${message}`;
            
            // Adicionar nos dois locais
            document.getElementById('test-results').appendChild(resultDiv.cloneNode(true));
            
            const modalResults = document.getElementById('modal-results');
            if (modalResults) {
                modalResults.appendChild(resultDiv);
            }
            
            console.log(`TEST #${testCount}: ${message}`);
        }
        
        function testarBotao(nome) {
            addResult(`üéØ ${nome} clicado e funcionou!`, 'success');
            
            // Visual feedback
            event.target.style.transform = 'scale(0.95)';
            setTimeout(() => {
                event.target.style.transform = '';
            }, 150);
        }
        
        function testarForm(e) {
            e.preventDefault();
            addResult('üìù Formul√°rio submetido com sucesso!', 'success');
            
            // Simular loading
            const submitBtn = e.target.querySelector('button[type="submit"]');
            const originalText = submitBtn.innerHTML;
            submitBtn.innerHTML = '‚è≥ Enviando...';
            submitBtn.disabled = true;
            
            setTimeout(() => {
                submitBtn.innerHTML = originalText;
                submitBtn.disabled = false;
                addResult('‚úÖ Dados processados!', 'success');
            }, 1500);
            
            return false;
        }
        
        // Monitor eventos de modal
        document.addEventListener('show.bs.modal', function(e) {
            addResult('üîµ Modal come√ßando a abrir...', 'success');
            document.getElementById('status').textContent = 'Modal abrindo...';
        });
        
        document.addEventListener('shown.bs.modal', function(e) {
            addResult('üü¢ Modal aberta completamente!', 'success');
            document.getElementById('status').textContent = 'Modal ATIVA';
        });
        
        document.addEventListener('hide.bs.modal', function(e) {
            addResult('üü° Modal come√ßando a fechar...', 'success');
            document.getElementById('status').textContent = 'Modal fechando...';
        });
        
        document.addEventListener('hidden.bs.modal', function(e) {
            addResult('üî¥ Modal fechada completamente!', 'success');
            document.getElementById('status').textContent = 'Modal fechada';
        });
        
        // Monitor cliques gerais
        document.addEventListener('click', function(e) {
            if (e.target.tagName === 'BUTTON' && !e.target.textContent.includes('ABRIR MODAL')) {
                console.log('CLICK DETECTADO:', e.target.textContent.trim());
            }
        });
        
        // Status inicial
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                document.getElementById('status').textContent = 'Pronto para teste';
                addResult('üöÄ Sistema carregado - SEM bot√£o daltonismo!', 'success');
                
                if (isIOS) {
                    addResult('üì± iPhone detectado - testando compatibilidade...', 'success');
                }
            }, 500);
        });
        
        // Teste autom√°tico de touch em iOS
        if (isIOS) {
            setTimeout(() => {
                addResult('üçé Configura√ß√µes iOS aplicadas', 'success');
            }, 1000);
        }
    </script>
</body>
</html> 