<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TESTE VIEWPORT MODAL</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="css/colorblind-accessibility.css" rel="stylesheet">
    <link href="css/modal-fix-viewport.css" rel="stylesheet">
    <style>
        .table-container {
            border: 3px solid #dc3545;
            padding: 20px;
            margin: 20px;
            background: #fff3cd;
            overflow: hidden;
            position: relative;
        }
        
        .table-container::before {
            content: "üìã CONTAINER DA TABELA";
            position: absolute;
            top: 5px;
            left: 10px;
            font-size: 12px;
            font-weight: bold;
            color: #dc3545;
        }
        
        .debug-info {
            position: fixed;
            top: 10px;
            right: 10px;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 10px;
            border-radius: 5px;
            font-size: 12px;
            z-index: 10001;
        }
    </style>
</head>
<body>
    <div class="debug-info">
        <div>üì± iPhone Modal Test</div>
        <div id="modal-status">üî¥ Modal: Fechada</div>
        <div id="viewport-status">üìè Viewport: -</div>
    </div>

    <div class="container-fluid">
        <h1 class="text-center mt-3">üéØ TESTE VIEWPORT MODAL</h1>
        <p class="text-center text-muted">Modal deve sair da tabela e ocupar tela inteira</p>
        
        <!-- Simula√ß√£o da estrutura original -->
        <div class="table-container">
            <h5>Esta √© a tabela de forcings onde a modal estava sendo contida:</h5>
            
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>TAG</th>
                        <th>Equipamento</th>
                        <th>Status</th>
                        <th>A√ß√µes</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>TAG-001</td>
                        <td>Motor Bomba</td>
                        <td><span class="badge bg-warning">Pendente</span></td>
                        <td>
                            <button class="btn btn-success btn-sm" data-bs-toggle="modal" data-bs-target="#execucaoModal">
                                üîß Executar (TESTE)
                            </button>
                        </td>
                    </tr>
                    <tr>
                        <td>TAG-002</td>
                        <td>Compressor</td>
                        <td><span class="badge bg-info">Liberado</span></td>
                        <td>
                            <button class="btn btn-primary btn-sm" data-bs-toggle="modal" data-bs-target="#liberarModal">
                                ‚úÖ Liberar (TESTE)
                            </button>
                        </td>
                    </tr>
                </tbody>
            </table>
            
            <div class="alert alert-warning">
                ‚ö†Ô∏è <strong>PROBLEMA ORIGINAL:</strong> Modal aparecia apenas dentro desta √°rea amarela!
                <br>
                ‚úÖ <strong>SOLU√á√ÉO:</strong> Modal agora deve ocupar a tela inteira do iPhone
            </div>
        </div>
    </div>

    <!-- Modal Execu√ß√£o (igual ao sistema real) -->
    <div class="modal fade" id="execucaoModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Registrar Execu√ß√£o</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <p><strong>Forcing:</strong> Motor Bomba Principal</p>
                    
                    <div class="mb-3">
                        <label class="form-label">Local de Execu√ß√£o <span class="text-danger">*</span></label>
                        <select class="form-select">
                            <option value="">Selecione o local...</option>
                            <option value="supervisorio">Supervis√≥rio</option>
                            <option value="plc">PLC</option>
                            <option value="local">Local</option>
                        </select>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Observa√ß√µes da Execu√ß√£o</label>
                        <textarea class="form-control" rows="3" placeholder="Observa√ß√µes sobre a execu√ß√£o (opcional)"></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary">
                        <i class="fas fa-tools"></i> Registrar Execu√ß√£o
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Liberar -->
    <div class="modal fade" id="liberarModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Liberar Forcing</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <p><strong>Forcing:</strong> Compressor de Ar</p>
                    
                    <div class="mb-3">
                        <label class="form-label">Observa√ß√µes</label>
                        <textarea class="form-control" rows="3" placeholder="Observa√ß√µes sobre a libera√ß√£o (opcional)"></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-success">
                        <i class="fas fa-check"></i> Liberar Forcing
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/colorblind-simple.js"></script>
    <script src="js/modal-fix-viewport.js"></script>
    
    <script>
        // Monitor status da modal
        document.addEventListener('shown.bs.modal', function(e) {
            document.getElementById('modal-status').textContent = 'üü¢ Modal: Aberta';
            
            // Verificar se modal ocupa viewport completo
            const modal = e.target;
            const rect = modal.getBoundingClientRect();
            const viewport = {
                width: window.innerWidth,
                height: window.innerHeight
            };
            
            const coverage = {
                width: (rect.width / viewport.width * 100).toFixed(1),
                height: (rect.height / viewport.height * 100).toFixed(1)
            };
            
            document.getElementById('viewport-status').innerHTML = 
                `üìè Viewport: ${coverage.width}% x ${coverage.height}%`;
            
            console.log('Modal dimensions:', {
                modal: { width: rect.width, height: rect.height },
                viewport: viewport,
                coverage: coverage
            });
            
            if (coverage.width >= 95 && coverage.height >= 95) {
                console.log('‚úÖ Modal ocupando viewport completo!');
            } else {
                console.log('‚ö†Ô∏è Modal n√£o est√° ocupando viewport completo');
            }
        });
        
        document.addEventListener('hidden.bs.modal', function(e) {
            document.getElementById('modal-status').textContent = 'üî¥ Modal: Fechada';
            document.getElementById('viewport-status').textContent = 'üìè Viewport: -';
        });
        
        // Info do dispositivo
        const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent);
        if (isIOS) {
            console.log('üì± iPhone detectado - aplicando fixes espec√≠ficos');
        }
    </script>
</body>
</html> 