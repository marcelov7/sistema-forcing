# TERMO DE RESPONSABILIDADE - SISTEMA FORCING
## Baseado no Procedimento SMC-MAN-PR-014 V.4

## üìã Vis√£o Geral

O Sistema de Termo de Responsabilidade foi implementado seguindo rigorosamente as diretrizes do **SMC-MAN-PR-014 - CONTROLE DE FORCING V.4**, garantindo compliance total com os procedimentos internos da empresa para altera√ß√µes em PLC e Supervis√≥rio.

## üîß Funcionalidades Atualizadas

### 1. **Termo Baseado em Procedimento Oficial**
- **Refer√™ncia**: SMC-MAN-PR-014 V.4 (Publica√ß√£o: 03/05/2024)
- **Objetivo**: Controle de altera√ß√µes em PLC/Supervis√≥rio para integridade f√≠sica
- **Compliance**: Total alinhamento com procedimentos da empresa

### 2. **Conte√∫do Atualizado do Termo**
- **Identifica√ß√£o do SOLICITANTE**: Conforme defini√ß√µes do procedimento
- **Responsabilidades Espec√≠ficas**: Baseadas no SMC-MAN-PR-014
- **Tipos de Forcing**: Processo e Manuten√ß√£o conforme procedimento
- **Hierarquia de Autoriza√ß√£o**: Conforme organograma oficial
- **Fluxo Obrigat√≥rio**: Nota SAP M2 ‚Üí Sistema ‚Üí Autoriza√ß√£o ‚Üí Execu√ß√£o ‚Üí Retirada

### 3. **Registro Aprimorado de Aceites**
- **Vers√£o do Procedimento**: SMC-MAN-PR-014 V.4
- **Resumo do Procedimento**: Registrado para auditoria
- **Dados T√©cnicos**: IP, User Agent, timestamp preciso
- **Rastreabilidade**: Compliance total para auditoria

## üöÄ Fluxo Atualizado Conforme SMC-MAN-PR-014

```
1. Usu√°rio (SOLICITANTE) clica em "Novo Forcing"
   ‚Üì
2. Sistema exibe termo baseado em SMC-MAN-PR-014 V.4
   ‚Üì
3. Usu√°rio aceita responsabilidades conforme procedimento
   ‚Üì
4. Sistema registra aceite com vers√£o do procedimento
   ‚Üì
5. Usu√°rio preenche formul√°rio (integra√ß√£o futura com SAP M2)
   ‚Üì
6. Fluxo segue conforme SMC-MAN-PR-014: Autoriza√ß√£o ‚Üí Execu√ß√£o ‚Üí Retirada
```

## üìÑ Principais Atualiza√ß√µes

### Responsabilidades do SOLICITANTE (SMC-MAN-PR-014)
- ‚úÖ **An√°lise de Seguran√ßa**: Riscos pessoais, patrimoniais e de processo
- ‚úÖ **Justificativa T√©cnica**: Motivos justificados obrigat√≥rios
- ‚úÖ **√Årea de Compet√™ncia**: Apenas dentro da responsabilidade do setor
- ‚úÖ **Comunica√ß√£o Pr√©via**: Informar operador antes da execu√ß√£o
- ‚úÖ **Acompanhamento**: Monitorar at√© retirada completa

### Obriga√ß√µes e Restri√ß√µes
- ‚ùå **Execu√ß√£o Proibida**: Apenas t√©cnicos de manuten√ß√£o el√©trica
- ‚ùå **Autoriza√ß√£o Obrigat√≥ria**: Conforme hierarquia definida
- ‚ùå **Prazo de Validade**: Defini√ß√£o obrigat√≥ria para retirada
- ‚ùå **Registro SAP**: Nota M2 obrigat√≥ria conforme procedimento

### Tipos de Forcing (SMC-MAN-PR-014)
- **üè≠ FORCING DE PROCESSO**: Press√µes, vaz√µes, temperaturas, sensores
- **üîß FORCING DE MANUTEN√á√ÉO**: Prote√ß√µes, rel√©s, botoeiras, chaves

### Hierarquia de Autoriza√ß√£o
- **FORCING DE PRODU√á√ÉO**: Gerente Industrial, Coordenador Produ√ß√£o
- **FORCING DE MANUTEN√á√ÉO**: Gerente/Coordenadores de Manuten√ß√£o

## üîç Auditoria Aprimorada

### Novos Campos Registrados
- **procedure_version**: SMC-MAN-PR-014 V.4
- **procedure_summary**: Resumo do procedimento aplicado
- **Compliance**: Rastreabilidade total conforme normas

### Comando de Auditoria Atualizado
```bash
# Relat√≥rio completo com vers√£o do procedimento
php artisan terms:check

# Exemplo de sa√≠da:
ID | Usu√°rio | Email | Data/Hora | Procedimento | IP | Navegador
1  | Jo√£o    | j@... | 23/07 14:30 | SMC-MAN-PR-014 V.4 | 192.168.1.100 | Chrome...
```

## üìä Informa√ß√µes de Compliance

### Dados de Auditoria SMC-MAN-PR-014
- **user_id**: ID do SOLICITANTE
- **procedure_version**: Vers√£o exata do procedimento
- **procedure_summary**: Descri√ß√£o do procedimento aplicado
- **ip_address**: Endere√ßo IP da sess√£o
- **user_agent**: Informa√ß√µes do navegador
- **accepted_at**: Timestamp preciso do aceite

### Conformidade Legal
- ‚úÖ **Procedimento Oficial**: SMC-MAN-PR-014 V.4
- ‚úÖ **Registro Completo**: Todos os dados para auditoria
- ‚úÖ **Rastreabilidade**: Compliance total
- ‚úÖ **Versioning**: Controle de vers√£o do procedimento

## üîí Aspectos de Seguran√ßa Atualizados

### 1. **Compliance SMC-MAN-PR-014**
- Termo baseado 100% no procedimento oficial
- Linguagem t√©cnica conforme padr√µes da empresa
- Responsabilidades claras conforme hierarquia

### 2. **Seguran√ßa Operacional**
- Proibi√ß√£o expressa de execu√ß√£o por n√£o-t√©cnicos
- Obrigatoriedade de comunica√ß√£o pr√©via
- An√°lise de riscos obrigat√≥ria

### 3. **Controle de Acesso**
- Registro de vers√£o do procedimento
- Auditoria completa para compliance
- Rastreabilidade total das a√ß√µes

## üìà Benef√≠cios da Atualiza√ß√£o

### 1. **Compliance Total**
- Alinhamento com SMC-MAN-PR-014 V.4
- Registro legal conforme procedimentos
- Auditoria adequada para normas internas

### 2. **Seguran√ßa Aprimorada**
- Responsabilidades claras por fun√ß√£o
- Hierarquia de autoriza√ß√£o definida
- Procedimentos de seguran√ßa espec√≠ficos

### 3. **Gest√£o Profissional**
- Terminologia t√©cnica adequada
- Fluxo conforme procedimentos oficiais
- Integra√ß√£o futura com sistemas SAP

## üîß Pr√≥ximos Passos Recomendados

### 1. **Integra√ß√£o SAP**
- Conex√£o com notas M2 do SAP
- Sincroniza√ß√£o de dados
- Workflow automatizado

### 2. **Valida√ß√£o Hier√°rquica**
- Verifica√ß√£o autom√°tica de autorizantes
- Controle por √°rea de responsabilidade
- Aprova√ß√£o eletr√¥nica

### 3. **Relat√≥rios Gerenciais**
- Dashboard para coordenadores
- Relat√≥rios por √°rea/tipo
- Indicadores de compliance

---

**Atualizado Conforme**: SMC-MAN-PR-014 - CONTROLE DE FORCING V.4  
**Data da Atualiza√ß√£o**: 23 de Julho de 2025  
**Vers√£o do Sistema**: 1.1  
**Status**: ‚úÖ Compliance Total com Procedimento Oficial

## üîß Funcionalidades

### 1. **Termo Obrigat√≥rio**
- **Localiza√ß√£o**: `/forcing/terms`
- **Quando aparece**: Sempre que um usu√°rio tentar criar um novo forcing
- **Comportamento**: Redireciona automaticamente para o termo antes do formul√°rio

### 2. **Conte√∫do do Termo**
- **Identifica√ß√£o do Solicitante**: Nome, empresa, setor, email e perfil
- **Data/Hora**: Timestamp preciso do momento da visualiza√ß√£o
- **Responsabilidades**: Lista detalhada das obriga√ß√µes do solicitante
- **Consequ√™ncias**: Advert√™ncias sobre uso inadequado
- **Fluxo do Processo**: Explica√ß√£o visual das etapas do forcing
- **Compromissos de Seguran√ßa**: Checklist de verifica√ß√µes necess√°rias

### 3. **Registro de Aceites**
- **Tabela**: `terms_acceptances`
- **Dados Registrados**:
  - ID do usu√°rio
  - Endere√ßo IP
  - User Agent (navegador)
  - Data/hora precisa do aceite
- **Finalidade**: Auditoria e controle de compliance

## üöÄ Fluxo de Funcionamento

```
1. Usu√°rio clica em "Novo Forcing"
   ‚Üì
2. Sistema redireciona para /forcing/terms
   ‚Üì
3. Usu√°rio visualiza termo de responsabilidade
   ‚Üì
4. Usu√°rio marca checkbox de aceite
   ‚Üì
5. Usu√°rio clica em "Aceitar e Continuar"
   ‚Üì
6. Sistema registra aceite no banco de dados
   ‚Üì
7. Usu√°rio √© redirecionado para formul√°rio de cria√ß√£o
```

## üìÑ Arquivos Envolvidos

### Views
- `resources/views/forcing/terms.blade.php` - Interface do termo

### Controllers
- `app/Http/Controllers/ForcingController.php` - M√©todos `showTerms()` e `create()`

### Models
- `app/Models/TermsAcceptance.php` - Model para aceites
- `app/Models/User.php` - Relacionamento com aceites

### Migrations
- `database/migrations/*_create_terms_acceptances_table.php` - Estrutura da tabela

### Routes
- `routes/web.php` - Rota `/forcing/terms`

### Commands
- `app/Console/Commands/CheckTermsAcceptances.php` - Auditoria de aceites

## üîç Comandos de Auditoria

### Verificar Todos os Aceites
```bash
php artisan terms:check
```

### Filtrar por Usu√°rio Espec√≠fico
```bash
php artisan terms:check --user=1
```

### Mostrar Apenas √öltimos 30 Dias
```bash
php artisan terms:check --recent
```

### Combinar Filtros
```bash
php artisan terms:check --user=1 --recent
```

## üìä Informa√ß√µes Registradas

### Dados de Auditoria
- **user_id**: ID do usu√°rio que aceitou
- **ip_address**: Endere√ßo IP da sess√£o
- **user_agent**: Informa√ß√µes do navegador
- **accepted_at**: Data/hora precisa do aceite
- **created_at**: Timestamp de cria√ß√£o do registro
- **updated_at**: Timestamp de √∫ltima atualiza√ß√£o

### Relat√≥rio de Aceites
O comando `terms:check` fornece:
- Lista completa de aceites
- Estat√≠sticas por per√≠odo (hoje, semana, m√™s)
- Top usu√°rios com mais aceites
- Filtros por usu√°rio e data

## üîí Aspectos de Seguran√ßa

### 1. **N√£o Contorn√°vel**
- O termo √© obrigat√≥rio e n√£o pode ser pulado
- Redirecionamento autom√°tico antes do formul√°rio
- Verifica√ß√£o no controller

### 2. **Auditoria Completa**
- Todos os aceites s√£o registrados
- Dados de sess√£o preservados
- Rastreabilidade completa

### 3. **Interface Intuitiva**
- Checkbox obrigat√≥rio para habilitar bot√£o
- Loading state durante redirecionamento
- Design responsivo e acess√≠vel

## üé® Caracter√≠sticas da Interface

### Design
- **Cores**: Esquema de cores de aviso (amarelo/laranja)
- **√çcones**: Font Awesome para visual profissional
- **Layout**: Responsivo com Bootstrap 5

### Interatividade
- Checkbox obrigat√≥rio para prosseguir
- Bot√£o desabilitado at√© aceite
- Anima√ß√£o de loading no redirecionamento
- Tooltips informativos

### Responsividade
- Layout adapt√°vel para mobile
- Colapso de elementos em telas pequenas
- Navega√ß√£o otimizada para touch

## üìà Benef√≠cios Implementados

### 1. **Compliance**
- Registro legal de aceite
- Auditoria completa
- Rastreabilidade de a√ß√µes

### 2. **Seguran√ßa**
- Conscientiza√ß√£o do usu√°rio
- Redu√ß√£o de forcing desnecess√°rios
- Responsabiliza√ß√£o clara

### 3. **Gest√£o**
- Relat√≥rios de auditoria
- Estat√≠sticas de uso
- Controle de acesso

## üîß Manuten√ß√£o

### Limpeza de Registros Antigos
```sql
-- Remover aceites com mais de 2 anos (exemplo)
DELETE FROM terms_acceptances 
WHERE accepted_at < DATE_SUB(NOW(), INTERVAL 2 YEAR);
```

### Verifica√ß√£o de Integridade
```bash
# Verificar aceites √≥rf√£os
php artisan tinker
>>> TermsAcceptance::whereDoesntHave('user')->count()
```

### Backup de Dados de Auditoria
```bash
# Export para CSV
php artisan terms:check --recent > aceites_recentes.txt
```

## üìù Customiza√ß√µes Futuras

### Poss√≠veis Melhorias
1. **Versioning**: Controle de vers√µes do termo
2. **Templates**: Diferentes termos por tipo de forcing
3. **Notifica√ß√µes**: Email de confirma√ß√£o do aceite
4. **Dashboard**: Interface web para auditoria
5. **API**: Endpoints para integra√ß√£o externa

### Configura√ß√µes Adicionais
- Timeout de validade do aceite
- M√∫ltiplos termos por usu√°rio
- Assinatura digital
- Integra√ß√£o com sistemas externos

---

**Desenvolvido para**: Sistema de Controle de Forcing  
**Data**: Julho 2025  
**Vers√£o**: 1.0  
**Status**: ‚úÖ Implementado e Operacional
